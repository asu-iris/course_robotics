

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Centralized Joint Control &#8212; Modeling and Control of Robots</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'lec21/cjc';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Operational Space Control" href="../lec22/osc.html" />
    <link rel="prev" title="Decentralized Joint Control" href="../lec20/djc.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/iris_logo_2.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/iris_logo_2.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../lec1/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lec2/configuration.html">Robot Configuration</a></li>




<li class="toctree-l1"><a class="reference internal" href="../lec3-5/basic-kinematics.html">Basic Kinematics</a></li>





<li class="toctree-l1"><a class="reference internal" href="../lec6-8/fk.html">Forward Kinematics</a></li>






<li class="toctree-l1"><a class="reference internal" href="../lec9/ik.html">Inverse Kinematics</a></li>


<li class="toctree-l1"><a class="reference internal" href="../lec10/diff-trans.html">Derivative of Transformation</a></li>


<li class="toctree-l1"><a class="reference internal" href="../lec11-12/jacobian.html">Jacobian</a></li>





<li class="toctree-l1"><a class="reference internal" href="../lec13/singularity.html">Singularity &amp; Redundancy</a></li>


<li class="toctree-l1"><a class="reference internal" href="../lec14/statics.html">Statics</a></li>


<li class="toctree-l1"><a class="reference internal" href="../lec15/inverse_vk.html">Inverse Velocity Kinematics</a></li>



<li class="toctree-l1"><a class="reference internal" href="../lec16-17/nik.html">Numerical Inverse Kinematics</a></li>




<li class="toctree-l1"><a class="reference internal" href="../lec18/dyn.html">Dynamics (Lagrange formulation)</a></li>




<li class="toctree-l1"><a class="reference internal" href="../lec19/control_overview.html">Overview of Robot Control</a></li>



<li class="toctree-l1"><a class="reference internal" href="../lec20/djc.html">Decentralized Joint Control</a></li>



<li class="toctree-l1 current active"><a class="current reference internal" href="#">Centralized Joint Control</a></li>


<li class="toctree-l1"><a class="reference internal" href="../lec22/osc.html">Operational Space Control</a></li>


</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Flec21/cjc.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button"
   title="Open an issue"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/lec21/cjc.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Centralized Joint Control</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Centralized Joint Control</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#controller-i-pd-control-with-gravity-compensation">Controller I: PD Control with Gravity Compensation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#controller-ii-inverse-dynamics-control">Controller II: Inverse Dynamics Control</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="centralized-joint-control">
<h1>Centralized Joint Control<a class="headerlink" href="#centralized-joint-control" title="Permalink to this heading">#</a></h1>
<p>In the previous sections, we have discussed the design of independent
joint controllers. These are based on a single input/single-output
approach, and the coupling effects between the joints have been
considered as disturbances acting on each single joint. When large
operational speeds are required, or direct drive actuation is used
<span class="math notranslate nohighlight">\(\left(\boldsymbol{K}_{r}=\boldsymbol{I}\right)\)</span>, the nonlinear coupling
terms strongly influence system performance. Thus, considering the
effects of the components of <span class="math notranslate nohighlight">\(\boldsymbol{d}\)</span> as a disturbance may
generate large tracking errors. In this case, it is advisable to design
control algorithms that take advantage of a detailed knowledge of
manipulator dynamics to compensate for the nonlinear coupling terms of
the model. This leads to centralized control algorithms.</p>
<p>In the following control design for a <span class="math notranslate nohighlight">\(n\)</span>-joint manipulator, we consider
a manipulator without external end-effector forces and any joint
friction. The equation of motion of the manipulator thus is</p>
<div class="math notranslate nohighlight">
\[\label{equ.manipulator}
    \boldsymbol{B}(\boldsymbol{q}) \ddot{\boldsymbol{q}}+\boldsymbol{C}(\boldsymbol{q}, \dot{\boldsymbol{q}}) \dot{\boldsymbol{q}}+\boldsymbol{g}(\boldsymbol{q})=\boldsymbol{\tau}.\]</div>
<p>The controller we want to design is in the general form of</p>
<div class="math notranslate nohighlight">
\[\label{equ.controller}
\boldsymbol{\tau}=\boldsymbol{u}=\textbf{Controller}(\boldsymbol{q}, \boldsymbol{\dot{q}}, \boldsymbol{q}_d, \boldsymbol{\dot{q}}_d)\]</div>
<p>i.e., the controller takes as input the manipulator’s current joint
position <span class="math notranslate nohighlight">\(\boldsymbol{q}\)</span>, current joint velocity
<span class="math notranslate nohighlight">\(\boldsymbol{\dot{q}}\)</span>, the desired joint position <span class="math notranslate nohighlight">\(\boldsymbol{q}_d\)</span>,
and desired joint velocity <span class="math notranslate nohighlight">\(\boldsymbol{\dot{q}}_d\)</span>, and outputs the
joint torque <span class="math notranslate nohighlight">\(\boldsymbol{u}\)</span>.</p>
<p>Thus, the controlled manipulator with the controller is</p>
<div class="math notranslate nohighlight">
\[\label{equ.manipulator_control}
    \boldsymbol{B}(\boldsymbol{q}) \ddot{\boldsymbol{q}}+\boldsymbol{C}(\boldsymbol{q}, \dot{\boldsymbol{q}}) \dot{\boldsymbol{q}}+\boldsymbol{g}(\boldsymbol{q})=\textbf{Controller}(\boldsymbol{q}, \boldsymbol{\dot{q}}, \boldsymbol{q}_d, \boldsymbol{\dot{q}}_d)\]</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="controller-i-pd-control-with-gravity-compensation">
<h1>Controller I: PD Control with Gravity Compensation<a class="headerlink" href="#controller-i-pd-control-with-gravity-compensation" title="Permalink to this heading">#</a></h1>
<p>Given a <em>constant</em> desired joint position <span class="math notranslate nohighlight">\(\boldsymbol{q}_{d}\)</span>, we want
to design a controller
(<span class="xref myst">[equ.controller]</span>{reference-type=”ref”
reference=”equ.controller”}), such that from any initial configuration,
say <span class="math notranslate nohighlight">\(\boldsymbol{q}_0\)</span>, the controlled manipulator
(<span class="xref myst">[equ.manipulator_control]</span>{reference-type=”ref”
reference=”equ.manipulator_control”}) will eventually reach
<span class="math notranslate nohighlight">\(\boldsymbol{q}_{d}\)</span>. If we define the joint space error as the error
between the desired and the actual joint positions:</p>
<div class="math notranslate nohighlight">
\[{\boldsymbol{e}}=\boldsymbol{q}_{d}-\boldsymbol{q}\]</div>
<p>we want</p>
<div class="math notranslate nohighlight">
\[\boldsymbol{e}(t)\rightarrow \boldsymbol{0}\quad \text{as}\quad
t\rightarrow \infty.\]</div>
<p>Below, we will design the controller
(<span class="xref myst">[equ.controller]</span>{reference-type=”ref”
reference=”equ.controller”}) based on the Lyapunov method (see
background of Lyapunov method in Lecture 16-17). First, we take the
vector <span class="math notranslate nohighlight">\(\begin{bmatrix}\boldsymbol{e}\\
\boldsymbol{\dot{q}}\end{bmatrix}\)</span> as the control system state. Choose
the following positive definite quadratic form as Lyapunov function
candidate:</p>
<div class="math notranslate nohighlight">
\[V(\dot{\boldsymbol{q}}, {\boldsymbol{e}})=\frac{1}{2} \dot{\boldsymbol{q}}^{T} \boldsymbol{B}(\boldsymbol{q}) \dot{\boldsymbol{q}}+\frac{1}{2} {\boldsymbol{e}}^{T} \boldsymbol{K}_{P} {\boldsymbol{e}} \quad &gt;0 \quad \forall \dot{\boldsymbol{q}}, {\boldsymbol{e}} \neq \mathbf{0}\]</div>
<p>where <span class="math notranslate nohighlight">\(\boldsymbol{K}_{P}\)</span> is an <span class="math notranslate nohighlight">\((n \times n)\)</span> symmetric positive
definite matrix. Differentiating
<span class="math notranslate nohighlight">\(V(\dot{\boldsymbol{q}}, {\boldsymbol{e}})\)</span> with respect to time, and
recalling that <span class="math notranslate nohighlight">\(\boldsymbol{q}_{d}\)</span> is constant, yields</p>
<div class="math notranslate nohighlight">
\[\dot{V}=\dot{\boldsymbol{q}}^{T} \boldsymbol{B}(\boldsymbol{q}) \ddot{\boldsymbol{q}}+\frac{1}{2} \dot{\boldsymbol{q}}^{T} \dot{\boldsymbol{B}}(\boldsymbol{q}) \dot{\boldsymbol{q}}-\dot{\boldsymbol{q}}^{T} \boldsymbol{K}_{P} {\boldsymbol{e}}\]</div>
<p>From (<span class="xref myst">[equ.manipulator]</span>{reference-type=”ref”
reference=”equ.manipulator”}), we can solve for
<span class="math notranslate nohighlight">\(\boldsymbol{B} \ddot{\boldsymbol{q}}\)</span> and substituting it to the above
equation gives</p>
<div class="math notranslate nohighlight">
\[\label{equ.lypuanovdot}
    \dot{V}=\frac{1}{2} \dot{\boldsymbol{q}}^{T}(\dot{\boldsymbol{B}}(\boldsymbol{q})-2 \boldsymbol{C}(\boldsymbol{q}, \dot{\boldsymbol{q}})) \dot{\boldsymbol{q}}+\dot{\boldsymbol{q}}^{T}\left(\boldsymbol{u}-\boldsymbol{g}(\boldsymbol{q})-\boldsymbol{K}_{P} {\boldsymbol{e}}\right)\]</div>
<p>The first term on the right-hand side is zero since the matrix
<span class="math notranslate nohighlight">\(\boldsymbol{N}=\dot{\boldsymbol{B}}-2 \boldsymbol{C}\)</span> is a
skew-symmetric matrix (see in the property of dynamics in Lecture 18).
For the second term to be negative definite, we can take the controller
(<span class="xref myst">[equ.controller]</span>{reference-type=”ref”
reference=”equ.controller”}) as the follows:</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<div class="math notranslate nohighlight">
\[\label{equ.controller2}
\boldsymbol{u}=\underbrace{\boldsymbol{g}(\boldsymbol{q})}_{\text{gravitational compensation}}+\underbrace{\boldsymbol{K}_{P} \boldsymbol{e}}_{\text{proportional control}}\quad\underbrace{-\boldsymbol{K}_{D} \dot{\boldsymbol{q}}}_{\text{derivative control}}\]</div>
</div>
<p>with <span class="math notranslate nohighlight">\(\boldsymbol{K}_{D}\)</span> positive definite, corresponding to a
nonlinear compensation action of gravitational terms with a linear
proportional-derivative (PD) action.</p>
<figure class="align-default" id="pv-control-rl-1">
<a class="reference internal image-reference" href="../_images/PD_control_with_gravity_compensation.jpeg"><img alt="../_images/PD_control_with_gravity_compensation.jpeg" src="../_images/PD_control_with_gravity_compensation.jpeg" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 80 </span><span class="caption-text">Control diagram of PD control with gravity
compensation</span><a class="headerlink" href="#pv-control-rl-1" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>With the above controller
(<span class="xref myst">[equ.controller2]</span>{reference-type=”ref”
reference=”equ.controller2”}), the time derivative of the Lyapunov
function in
(<span class="xref myst">[equ.lypuanovdot]</span>{reference-type=”ref”
reference=”equ.lypuanovdot”}) becomes</p>
<div class="math notranslate nohighlight">
\[\dot{V}=-\boldsymbol{\dot{q}}^T\boldsymbol{K}_D\boldsymbol{\dot{q}} \quad &lt;0 \quad \forall \dot{\boldsymbol{q}}  \neq \mathbf{0}\]</div>
<p>and thus, <span class="math notranslate nohighlight">\(V\)</span> decreases long as <span class="math notranslate nohighlight">\(\dot{\boldsymbol{q}} \neq \mathbf{0}\)</span>
for all system trajectories. Thus, the controller manipulator will reach
an equilibrium configuration, with condition <span class="math notranslate nohighlight">\(\dot{V}= 0\)</span> and
<span class="math notranslate nohighlight">\(\dot{\boldsymbol{q}}=\mathbf{0}\)</span>. To find the equilibrium
configuration, we look at the manipulator dynamics under control</p>
<div class="math notranslate nohighlight">
\[\boldsymbol{B}(\boldsymbol{q}) \ddot{\boldsymbol{q}}+\boldsymbol{C}(\boldsymbol{q}, \dot{\boldsymbol{q}}) \dot{\boldsymbol{q}}+\boldsymbol{g}(\boldsymbol{q})=\boldsymbol{g}(\boldsymbol{q})+\boldsymbol{K}_{P} {\boldsymbol{e}}-\boldsymbol{K}_{D} \dot{\boldsymbol{q}}\]</div>
<p>With the condition <span class="math notranslate nohighlight">\(\dot{\boldsymbol{q}}=\mathbf{0}\)</span>, it follows that
<span class="math notranslate nohighlight">\(\ddot{\boldsymbol{q}} =\mathbf{0}\)</span>, and then from the above dynamics,
we have</p>
<div class="math notranslate nohighlight">
\[\boldsymbol{K}_{P} {\boldsymbol{e}}=\mathbf{0} \quad\rightarrow\quad {\boldsymbol{e}}=\boldsymbol{q}_{d}-\boldsymbol{q} = \mathbf{0}\]</div>
<p>Therefore, the manipulator will eventually reach equilibrium, which is
exactly the desired configuration <span class="math notranslate nohighlight">\(\boldsymbol{q}_{d}\)</span>.</p>
<p>The above derivation rigorously shows that any manipulator equilibrium
posture is globally asymptotically stable under a controller with a PD
linear action and a nonlinear gravity compensating action. Stability is
ensured for any choice of <span class="math notranslate nohighlight">\(\boldsymbol{K}_{P}\)</span> and <span class="math notranslate nohighlight">\(\boldsymbol{K}_{D}\)</span>,
as long as these are positive definite matrices. The control law
requires the on-line computation of the term
<span class="math notranslate nohighlight">\(\boldsymbol{g}(\boldsymbol{q})\)</span>.</p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="controller-ii-inverse-dynamics-control">
<h1>Controller II: Inverse Dynamics Control<a class="headerlink" href="#controller-ii-inverse-dynamics-control" title="Permalink to this heading">#</a></h1>
<p>One limitation of the above controller is that the above controller can
only follow a stationary desired <span class="math notranslate nohighlight">\(\boldsymbol{q}_d\)</span>, but is not good at
tracking a changing desired joint signal: i.e.,</p>
<div class="math notranslate nohighlight">
\[\label{equ.joint_signal}
\boldsymbol{q}_d(t),\quad\text{with} \quad \boldsymbol{\dot{q}}_d(t)\neq\boldsymbol{0} \quad \text{and} \quad \boldsymbol{\ddot{q}}_d(t)\neq\boldsymbol{0}\]</div>
<p>The approach of inverse dynamics control is trying to address the above
limitation. The idea of inverse dynamics control is to find a controller
(<span class="xref myst">[equ.controller]</span>{reference-type=”ref”
reference=”equ.controller”}) that can directly lead to linearization of
system dynamics. To do so, we set the controller
(<span class="xref myst">[equ.controller]</span>{reference-type=”ref”
reference=”equ.controller”}) in the following particular form:</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<div class="math notranslate nohighlight">
\[\label{equ:u}
    \boldsymbol{u}=\boldsymbol{B}(\boldsymbol{q}) \boldsymbol{y}+\boldsymbol{C}(\boldsymbol{q}, \dot{\boldsymbol{q}}) \dot{\boldsymbol{q}}+\boldsymbol{g}(\boldsymbol{q})\]</div>
</div>
<p>where <span class="math notranslate nohighlight">\(\boldsymbol{y}\)</span> is a new input vector whose expression is to be
determined yet. The above controller directly leads to the controlled
manipulator
(<span class="xref myst">[equ.manipulator_control]</span>{reference-type=”ref”
reference=”equ.manipulator_control”}) as</p>
<div class="math notranslate nohighlight">
\[\boldsymbol{B}(\boldsymbol{q}) \ddot{\boldsymbol{q}}+\boldsymbol{C}(\boldsymbol{q}, \dot{\boldsymbol{q}}) \dot{\boldsymbol{q}}+\boldsymbol{g}(\boldsymbol{q})=\boldsymbol{B}(\boldsymbol{q}) \boldsymbol{y}+\boldsymbol{C}(\boldsymbol{q}, \dot{\boldsymbol{q}}) \dot{\boldsymbol{q}}+\boldsymbol{g}(\boldsymbol{q})\]</div>
<p>leading to</p>
<div class="math notranslate nohighlight">
\[\label{equ.dyn_new}
\boldsymbol{\ddot{q}}=\boldsymbol{y}\]</div>
<p>Again, we will discuss how to set
this new control input vector <span class="math notranslate nohighlight">\(\boldsymbol{y}\)</span>, but the particular form
of controller (<span class="xref myst">[equ:u]</span>{reference-type=”ref”
reference=”equ:u”}) leads to a linear relationship between the input
signal <span class="math notranslate nohighlight">\(\boldsymbol{y}\)</span> and the manipulator’s joint acceleration
<span class="math notranslate nohighlight">\(\ddot{\boldsymbol{q}}\)</span>.</p>
<p>The control diagram corresponding to the controller
(<span class="xref myst">[equ:u]</span>{reference-type=”ref” reference=”equ:u”}) is shown
in Fig. <span class="xref myst">2</span>{reference-type=”ref” reference=”fig:2”}. The
controller (<span class="xref myst">[equ:u]</span>{reference-type=”ref” reference=”equ:u”})
is termed inverse dynamics control as it is based on the computation of
inverse dynamics. From
(<span class="xref myst">[equ.dyn_new]</span>{reference-type=”ref”
reference=”equ.dyn_new”}, the controlled manipulator system is linear
and decoupled with respect to new input <span class="math notranslate nohighlight">\(\boldsymbol{y}\)</span>.</p>
<figure class="align-default" id="inverse-dynamics-control">
<a class="reference internal image-reference" href="../_images/inverse_dynamics_control.jpeg"><img alt="../_images/inverse_dynamics_control.jpeg" src="../_images/inverse_dynamics_control.jpeg" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 81 </span><span class="caption-text">Exact linearization performed by inverse dynamics
control</span><a class="headerlink" href="#inverse-dynamics-control" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
<p>Thus, the manipulator control problem is reduced to that of finding a
control input signal <span class="math notranslate nohighlight">\(\boldsymbol{y}\)</span>. To this end,</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<div class="math notranslate nohighlight">
\[\label{equ.y}
    \boldsymbol{y}=\ddot{\boldsymbol{{q}}}_d+\boldsymbol{K}_{P} ({\boldsymbol{q}}_{d}-\boldsymbol{q})+\boldsymbol{K}_{D} (\dot{\boldsymbol{q}}_{d}-\dot{\boldsymbol{q}})\]</div>
</div>
<p>Here, <span class="math notranslate nohighlight">\(\boldsymbol{K}_{P}\)</span> and <span class="math notranslate nohighlight">\(\boldsymbol{K}_{D}\)</span> are positive
definite matrices. Plugging the above <span class="math notranslate nohighlight">\(\boldsymbol{y}\)</span> signal into
(<span class="xref myst">[equ.dyn_new]</span>{reference-type=”ref”
reference=”equ.dyn_new”}) leads to</p>
<div class="math notranslate nohighlight">
\[\label{equ.error_dyn2}
    (\ddot{\boldsymbol{{q}}}_d-\ddot{\boldsymbol{q}})+\boldsymbol{K}_{P} ({\boldsymbol{q}}_{d}-\boldsymbol{q})+\boldsymbol{K}_{D} (\dot{\boldsymbol{q}}_{d}-\dot{\boldsymbol{q}})=\boldsymbol{0}\]</div>
<p>Again, if we define the error
<span class="math notranslate nohighlight">\(\boldsymbol{e}={\boldsymbol{q}}_{d}-{\boldsymbol{q}}\)</span>, the above
(<span class="xref myst">[equ.error_dyn]</span>{reference-type=”ref”
reference=”equ.error_dyn”}) becomes the following error dynamics</p>
<div class="math notranslate nohighlight">
\[\label{equ.error_dyn}
    \ddot{\boldsymbol{e}}+\boldsymbol{K}_{P} \dot{\boldsymbol{e}}+\boldsymbol{K}_{D} {\boldsymbol{e}}=\boldsymbol{0}\]</div>
<p>expressing the dynamics of position error while tracking the given
trajectory. This is a standard second-order error system, where its
convergence depends on the value of <span class="math notranslate nohighlight">\(\boldsymbol{K}_P\)</span> and
<span class="math notranslate nohighlight">\(\boldsymbol{K}_D\)</span>. Particularly, we usually choose</p>
<div class="math notranslate nohighlight">
\[\label{equ.kpkd}
    \boldsymbol{K}_{P}=\operatorname{diag}\left\{\omega_{n 1}^{2}, \ldots, \omega_{n n}^{2}\right\} \quad \boldsymbol{K}_{D}=\operatorname{diag}\left\{2 \zeta_{1} \omega_{n 1}, \ldots, 2 \zeta_{n} \omega_{n n}\right\}\]</div>
<p>Then, the controlled manipulator dynamics is replaced with <span class="math notranslate nohighlight">\(n\)</span> linear
and decoupled second-order subsystems. For each joint <span class="math notranslate nohighlight">\(i\)</span>, please see my
control background notes for how the values of the damping ratio
<span class="math notranslate nohighlight">\(\zeta_i\)</span> and natural frequency <span class="math notranslate nohighlight">\(\omega_{ni}\)</span> can affect the trajectory
of <span class="math notranslate nohighlight">\(\boldsymbol{e}(t)\)</span>.</p>
<p>The resulting block scheme is illustrated in Fig.
<span class="xref myst">3</span>{reference-type=”ref” reference=”fig:3”}. Notice that the
inverse dynamics controller requires computation of the inertia matrix
<span class="math notranslate nohighlight">\(\boldsymbol{B}(\boldsymbol{q})\)</span>,
<span class="math notranslate nohighlight">\(\boldsymbol{C}(\boldsymbol{q}, \dot{\boldsymbol{q}})\)</span>, and
<span class="math notranslate nohighlight">\(\boldsymbol{g}(\boldsymbol{q})\)</span>. Nonetheless, this technique is based
on the assumption of perfect cancellation of dynamic terms, and then it
is quite natural to raise questions about sensitivity and robustness
problems due to unavoidably imperfect compensation.</p>
<figure class="align-default" id="inverse-dynamics-control2">
<a class="reference internal image-reference" href="../_images/inverse_dynamics_control2.jpeg"><img alt="../_images/inverse_dynamics_control2.jpeg" src="../_images/inverse_dynamics_control2.jpeg" style="width: 70%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 82 </span><span class="caption-text">Control diagram of joint space inverse dynamics
control</span><a class="headerlink" href="#inverse-dynamics-control2" title="Permalink to this image">#</a></p>
</figcaption>
</figure>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./lec21"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../lec20/djc.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Decentralized Joint Control</p>
      </div>
    </a>
    <a class="right-next"
       href="../lec22/osc.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Operational Space Control</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Centralized Joint Control</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#controller-i-pd-control-with-gravity-compensation">Controller I: PD Control with Gravity Compensation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#controller-ii-inverse-dynamics-control">Controller II: Inverse Dynamics Control</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Wanxin Jin @ IRIS Lab
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>